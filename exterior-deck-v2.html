<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Midlakes Exterior Deck</title>
    <link rel="stylesheet" href="/bootstrap.min.css"/>
    <link rel="stylesheet" href="/pannellum.css"/>
    <link rel="stylesheet" href="/style.css"/>
    <script type="text/javascript" src="/pannellum.js"></script>
    <style>
        #panorama { width: 100%; height: 65vh; }
        .thumbnail-row { 
            margin-top: 20px; 
            overflow-x: auto; 
            white-space: nowrap; 
            padding: 10px 0;
        }
        .thumbnail-row img {
            width: 100px;
            height: 75px;
            object-fit: cover;
            margin: 0 3px;
            border: 2px solid #fff;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            opacity: 0.8;
        }
        .thumbnail-row img:hover, .thumbnail-row img.active {
            opacity: 1;
            transform: scale(1.1);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
  <div class="d-flex w-100 h-100 p-3 mx-auto flex-column">
    <header class="masthead d-flex flex-row align-items-center mb-4 text-center">
      <h3 class="masthead-brand m-0"><a href="/">Midlakes</a></h3>
      <h4 class="flex-grow-1 m-0" id="filename">Exterior Deck – View 1</h4>
      <div id="navigation"> 
        <strong><a href="/exterior-deck.html">Exterior Deck</a></strong> | 
        <a href="/exterior-grounds.html">Exterior Grounds</a> | 
        <a href="/exterior-pier.html">Exterior Pier</a> |
        <a href="/interior-upstairs.html">Interior Upstairs</a> | 
        <a href="/interior-main.html">Interior Main</a> | 
        <a href="/interior-downstairs.html">Interior Downstairs</a> 
      </div>
    </header>

    <main role="main" class="d-flex flex-column flex-grow-1">
      <div id="panorama"></div>
    </main>
      
    <div class="thumbnail-row text-center">
      <img src="/images/exterior-deck/ext-deck-01.jpeg" data-scene="1" class="active" alt="Exterior Deck 1">
      <img src="/images/exterior-deck/ext-deck-02.jpeg" data-scene="2" alt="Exterior Deck 2">
      <img src="/images/exterior-deck/ext-deck-03.jpeg" data-scene="3" alt="Exterior Deck 3">
      <img src="/images/exterior-deck/ext-deck-04.jpeg" data-scene="4" alt="Exterior Deck 4">
      <img src="/images/exterior-deck/ext-deck-05.jpeg" data-scene="5" alt="Exterior Deck 5">
      <img src="/images/exterior-deck/ext-deck-06.jpeg" data-scene="6" alt="Exterior Deck 6">
      <img src="/images/exterior-deck/ext-deck-07.jpeg" data-scene="7" alt="Exterior Deck 7">
      <img src="/images/exterior-deck/ext-deck-08.jpeg" data-scene="8" alt="Exterior Deck 8">
      <img src="/images/exterior-deck/ext-deck-09.jpeg" data-scene="9" alt="Exterior Deck 9">
      <img src="/images/exterior-deck/ext-deck-10.jpeg" data-scene="10" alt="Exterior Deck 10">
    </div>

    <script>
      const scenes = {
        "1":  { panorama: "/images/exterior-deck/ext-deck-01.jpeg", title: "Exterior Deck – View 1", hfov: 130 },
        "2":  { panorama: "/images/exterior-deck/ext-deck-02.jpeg", title: "Exterior Deck – View 2", hfov: 130 },
        "3":  { panorama: "/images/exterior-deck/ext-deck-03.jpeg", title: "Exterior Deck – View 3", hfov: 130 },
        "4":  { panorama: "/images/exterior-deck/ext-deck-04.jpeg", title: "Exterior Deck – View 4", hfov: 130 },
        "5":  { panorama: "/images/exterior-deck/ext-deck-05.jpeg", title: "Exterior Deck – View 5", hfov: 130 },
        "6":  { panorama: "/images/exterior-deck/ext-deck-06.jpeg", title: "Exterior Deck – View 6", hfov: 130 },
        "7":  { panorama: "/images/exterior-deck/ext-deck-07.jpeg", title: "Exterior Deck – View 7", hfov: 130 },
        "8":  { panorama: "/images/exterior-deck/ext-deck-08.jpeg", title: "Exterior Deck – View 8", hfov: 130 },
        "9":  { panorama: "/images/exterior-deck/ext-deck-09.jpeg", title: "Exterior Deck – View 9", hfov: 130 },
        "10": { panorama: "/images/exterior-deck/ext-deck-10.jpeg", title: "Exterior Deck – View 10", hfov: 130 }
        // If one particular photo needs a different zoom, just change its hfov here, e.g. "hfov": 100
      };

      const viewer = pannellum.viewer('panorama', {
        "default": {
          "firstScene": "1",
          "autoLoad": true,
          "autoRotate": -2,
          "hfov": 130,           // Default zoom level (higher = more zoomed out)
          "minHfov": 60,         // How far user can zoom in
          "maxHfov": 150,        // How far user can zoom out
          "pitch": -10,          // Slight downward tilt on load
          "yaw": 0,
          "showControls": true
        },
        "scenes": scenes
      });

      // Update title + ensure correct zoom on every scene change
      viewer.on('load', function() {
        const current = viewer.getScene();
        document.getElementById('filename').textContent = scenes[current].title;

        // Respect per-scene hfov if defined, otherwise use default
        if (scenes[current].hfov) {
          viewer.setHfov(scenes[current].hfov, true);  // true = animated transition
        }
      });

      // Thumbnail click handler
      document.querySelectorAll('.thumbnail-row img').forEach(thumb => {
        thumb.addEventListener('click', function() {
          const sceneId = this.getAttribute('data-scene');
          viewer.loadScene(sceneId);

          document.querySelectorAll('.thumbnail-row img').forEach(t => t.classList.remove('active'));
          this.classList.add('active');
        });
      });
    </script>
  </div>
</body>
</html>
